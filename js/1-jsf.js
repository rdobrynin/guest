'use strict';/*ZeroClipboard*/		!function(){"use strict";function a(a){return a.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function b(b){return parseFloat(a(b))>=10}var c,d={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},e={},f=0,g={},h=0,i={},j=null,k=null,l=function(){var a,b,c,d,e="ZeroClipboard.swf";if(document.currentScript&&(d=document.currentScript.src));else{var f=document.getElementsByTagName("script");if("readyState"in f[0])for(a=f.length;a--&&("interactive"!==f[a].readyState||!(d=f[a].src)););else if("loading"===document.readyState)d=f[f.length-1].src;else{for(a=f.length;a--;){if(c=f[a].src,!c){b=null;break}if(c=c.split("#")[0].split("?")[0],c=c.slice(0,c.lastIndexOf("/")+1),null==b)b=c;else if(b!==c){b=null;break}}null!==b&&(d=b)}}return d&&(d=d.split("#")[0].split("?")[0],e=d.slice(0,d.lastIndexOf("/")+1)+e),e}(),m=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),n=function(a,b){var c,d,e;return window.getComputedStyle?c=window.getComputedStyle(a,null).getPropertyValue(b):(d=m(b),c=a.currentStyle?a.currentStyle[d]:a.style[d]),"cursor"!==b||c&&"auto"!==c||(e=a.tagName.toLowerCase(),"a"!==e)?c:"pointer"},o=function(a){a||(a=window.event);var b;this!==window?b=this:a.target?b=a.target:a.srcElement&&(b=a.srcElement),I.activate(b)},p=function(a,b,c){a&&1===a.nodeType&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},q=function(a,b,c){a&&1===a.nodeType&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))},r=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)||a.classList.add(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},s=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)&&a.classList.remove(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},t=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(b/c*100)/100),d},u=function(a,b){var c={left:0,top:0,width:0,height:0,zIndex:A(b)-1};if(a.getBoundingClientRect){var d,e,f,g=a.getBoundingClientRect();"pageXOffset"in window&&"pageYOffset"in window?(d=window.pageXOffset,e=window.pageYOffset):(f=t(),d=Math.round(document.documentElement.scrollLeft/f),e=Math.round(document.documentElement.scrollTop/f));var h=document.documentElement.clientLeft||0,i=document.documentElement.clientTop||0;c.left=g.left+d-h,c.top=g.top+e-i,c.width="width"in g?g.width:g.right-g.left,c.height="height"in g?g.height:g.bottom-g.top}return c},v=function(a,b){var c=null==b||b&&b.cacheBust===!0&&b.useNoCache===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+(new Date).getTime():""},w=function(a){var b,c,d,e=[],f=[],g=[];if(a.trustedOrigins&&("string"==typeof a.trustedOrigins?f.push(a.trustedOrigins):"object"==typeof a.trustedOrigins&&"length"in a.trustedOrigins&&(f=f.concat(a.trustedOrigins))),a.trustedDomains&&("string"==typeof a.trustedDomains?f.push(a.trustedDomains):"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(f=f.concat(a.trustedDomains))),f.length)for(b=0,c=f.length;c>b;b++)if(f.hasOwnProperty(b)&&f[b]&&"string"==typeof f[b]){if(d=D(f[b]),!d)continue;if("*"===d){g=[d];break}g.push.apply(g,[d,"//"+d,window.location.protocol+"//"+d])}return g.length&&e.push("trustedOrigins="+encodeURIComponent(g.join(","))),"string"==typeof a.jsModuleId&&a.jsModuleId&&e.push("jsModuleId="+encodeURIComponent(a.jsModuleId)),e.join("&")},x=function(a,b,c){if("function"==typeof b.indexOf)return b.indexOf(a,c);var d,e=b.length;for("undefined"==typeof c?c=0:0>c&&(c=e+c),d=c;e>d;d++)if(b.hasOwnProperty(d)&&b[d]===a)return d;return-1},y=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},z=function(a,b,c,d){d?window.setTimeout(function(){a.apply(b,c)},0):a.apply(b,c)},A=function(a){var b,c;return a&&("number"==typeof a&&a>0?b=a:"string"==typeof a&&(c=parseInt(a,10))&&!isNaN(c)&&c>0&&(b=c)),b||("number"==typeof L.zIndex&&L.zIndex>0?b=L.zIndex:"string"==typeof L.zIndex&&(c=parseInt(L.zIndex,10))&&!isNaN(c)&&c>0&&(b=c)),b||0},B=function(a,b){if(a&&b!==!1&&"undefined"!=typeof console&&console&&(console.warn||console.log)){var c="`"+a+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(c):console.log(c)}},C=function(){var a,b,c,d,e,f,g=arguments[0]||{};for(a=1,b=arguments.length;b>a;a++)if(null!=(c=arguments[a]))for(d in c)if(c.hasOwnProperty(d)){if(e=g[d],f=c[d],g===f)continue;void 0!==f&&(g[d]=f)}return g},D=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},E=function(){var a=function(a,b){var c,d,e;if(null!=a&&"*"!==b[0]&&("string"==typeof a&&(a=[a]),"object"==typeof a&&"length"in a))for(c=0,d=a.length;d>c;c++)if(a.hasOwnProperty(c)&&(e=D(a[c]))){if("*"===e){b.length=0,b.push("*");break}-1===x(e,b)&&b.push(e)}},b={always:"always",samedomain:"sameDomain",never:"never"};return function(c,d){var e,f=d.allowScriptAccess;if("string"==typeof f&&(e=f.toLowerCase())&&/^always|samedomain|never$/.test(e))return b[e];var g=D(d.moviePath);null===g&&(g=c);var h=[];a(d.trustedOrigins,h),a(d.trustedDomains,h);var i=h.length;if(i>0){if(1===i&&"*"===h[0])return"always";if(-1!==x(c,h))return 1===i&&c===g?"sameDomain":"always"}return"never"}}(),F=function(a){if(null==a)return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},G=function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},H=function(){var a=!1;if("boolean"==typeof d.disabled)a=d.disabled===!1;else{if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0)}return a},I=function(a,b){return this instanceof I?(this.id=""+f++,g[this.id]={instance:this,elements:[],handlers:{}},a&&this.clip(a),"undefined"!=typeof b&&(B("new ZeroClipboard(elements, options)",L.debug),I.config(b)),this.options=I.config(),"boolean"!=typeof d.disabled&&(d.disabled=!H()),d.disabled===!1&&d.outdated!==!0&&null===d.bridge&&(d.outdated=!1,d.ready=!1,M()),void 0):new I(a,b)};I.prototype.setText=function(a){return a&&""!==a&&(e["text/plain"]=a,d.ready===!0&&d.bridge&&d.bridge.setText(a)),this},I.prototype.setSize=function(a,b){return d.ready===!0&&d.bridge&&d.bridge.setSize(a,b),this};var J=function(a){d.ready===!0&&d.bridge&&d.bridge.setHandCursor(a)};I.prototype.destroy=function(){this.unclip(),this.off(),delete g[this.id]};var K=function(){var a,b,c,d=[],e=F(g);for(a=0,b=e.length;b>a;a++)c=g[e[a]].instance,c&&c instanceof I&&d.push(c);return d};I.version="2.0.0-alpha.1";var L={swfPath:l,trustedDomains:window.location.host?[window.location.host]:[],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0};I.config=function(a){"object"==typeof a&&null!==a&&C(L,a);{if("string"!=typeof a||!a){var b={};for(var c in L)L.hasOwnProperty(c)&&(b[c]="object"==typeof L[c]&&null!==L[c]?"length"in L[c]?L[c].slice(0):C({},L[c]):L[c]);return b}if(L.hasOwnProperty(a))return L[a]}},I.destroy=function(){I.deactivate();for(var a in g)if(g.hasOwnProperty(a)&&g[a]){var b=g[a].instance;b&&"function"==typeof b.destroy&&b.destroy()}var c=N(d.bridge);c&&c.parentNode&&(c.parentNode.removeChild(c),d.ready=null,d.bridge=null)},I.activate=function(a){c&&(s(c,L.hoverClass),s(c,L.activeClass)),c=a,r(a,L.hoverClass),O();var b=L.title||a.getAttribute("title");if(b){var e=N(d.bridge);e&&e.setAttribute("title",b)}var f=L.forceHandCursor===!0||"pointer"===n(a,"cursor");J(f)},I.deactivate=function(){var a=N(d.bridge);a&&(a.style.left="0px",a.style.top="-9999px",a.removeAttribute("title")),c&&(s(c,L.hoverClass),s(c,L.activeClass),c=null)};var M=function(){var a,b,c=document.getElementById("global-zeroclipboard-html-bridge");if(!c){var e=I.config();e.jsModuleId="string"==typeof j&&j||"string"==typeof k&&k||null;var f=E(window.location.host,L),g=w(e),h=L.moviePath+v(L.moviePath,L),i='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+h+'"/>         <param name="allowScriptAccess" value="'+f+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+g+'"/>         <embed src="'+h+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+f+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+g+'"           scale="exactfit">         </embed>       </object>';c=document.createElement("div"),c.id="global-zeroclipboard-html-bridge",c.setAttribute("class","global-zeroclipboard-container"),c.style.position="absolute",c.style.left="0px",c.style.top="-9999px",c.style.width="15px",c.style.height="15px",c.style.zIndex=""+A(L.zIndex),document.body.appendChild(c),c.innerHTML=i}a=document["global-zeroclipboard-flash-bridge"],a&&(b=a.length)&&(a=a[b-1]),d.bridge=a||c.children[0].lastElementChild},N=function(a){for(var b=/^OBJECT|EMBED$/,c=a&&a.parentNode;c&&b.test(c.nodeName)&&c.parentNode;)c=c.parentNode;return c||null},O=function(){if(c){var a=u(c,L.zIndex),b=N(d.bridge);b&&(b.style.top=a.top+"px",b.style.left=a.left+"px",b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.zIndex=a.zIndex+1),d.ready===!0&&d.bridge&&d.bridge.setSize(a.width,a.height)}return this};I.prototype.on=function(a,b){var c,e,f,h={},i=g[this.id]&&g[this.id].handlers;if("string"==typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.on(c,a[c]);if(f&&f.length){for(c=0,e=f.length;e>c;c++)a=f[c].replace(/^on/,""),h[a]=!0,i[a]||(i[a]=[]),i[a].push(b);h.noflash&&d.disabled&&R.call(this,"noflash",{}),h.wrongflash&&d.outdated&&R.call(this,"wrongflash",{flashVersion:d.version}),h.load&&d.ready&&R.call(this,"load",{flashVersion:d.version})}return this},I.prototype.off=function(a,b){var c,d,e,f,h,i=g[this.id]&&g[this.id].handlers;if(0===arguments.length)f=F(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),h=i[a],h&&h.length)if(b)for(e=x(b,h);-1!==e;)h.splice(e,1),e=x(b,h,e);else i[a].length=0;return this},I.prototype.handlers=function(a){var b,c=null,d=g[this.id]&&g[this.id].handlers;if(d){if("string"==typeof a&&a)return d[a]?d[a].slice(0):null;c={};for(b in d)d.hasOwnProperty(b)&&d[b]&&(c[b]=d[b].slice(0))}return c};var P=function(a,b,c,d){var e=g[this.id]&&g[this.id].handlers[a];if(e&&e.length){var f,h,i,j=b||this;for(f=0,h=e.length;h>f;f++)i=e[f],b=j,"string"==typeof i&&"function"==typeof window[i]&&(i=window[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(b=i,i=i.handleEvent),"function"==typeof i&&z(i,b,c,d)}return this};I.prototype.clip=function(a){a=y(a);for(var b=0;b<a.length;b++)if(a.hasOwnProperty(b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===x(this.id,i[a[b].zcClippingId])&&i[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+h++,i[a[b].zcClippingId]=[this.id],L.autoActivate===!0&&p(a[b],"mouseover",o));var c=g[this.id].elements;-1===x(a[b],c)&&c.push(a[b])}return this},I.prototype.unclip=function(a){var b=g[this.id];if(b){var c,d=b.elements;a="undefined"==typeof a?d.slice(0):y(a);for(var e=a.length;e--;)if(a.hasOwnProperty(e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=x(a[e],d,c));)d.splice(c,1);var f=i[a[e].zcClippingId];if(f){for(c=0;-1!==(c=x(this.id,f,c));)f.splice(c,1);0===f.length&&(L.autoActivate===!0&&q(a[e],"mouseover",o),delete a[e].zcClippingId)}}}return this},I.prototype.elements=function(){var a=g[this.id];return a&&a.elements?a.elements.slice(0):[]};var Q=function(a){var b,c,d,e,f,h=[];if(a&&1===a.nodeType&&(b=a.zcClippingId)&&i.hasOwnProperty(b)&&(c=i[b],c&&c.length))for(d=0,e=c.length;e>d;d++)f=g[c[d]].instance,f&&f instanceof I&&h.push(f);return h};L.hoverClass="zeroclipboard-is-hover",L.activeClass="zeroclipboard-is-active",L.trustedOrigins=null,L.allowScriptAccess=null,L.useNoCache=!0,L.moviePath="ZeroClipboard.swf",I.detectFlashSupport=function(){return B("ZeroClipboard.detectFlashSupport",L.debug),H()},I.dispatch=function(a,b){if("string"==typeof a&&a){var d=a.toLowerCase().replace(/^on/,"");if(d)for(var e=c?Q(c):K(),f=0,g=e.length;g>f;f++)R.call(e[f],d,b)}},I.prototype.setHandCursor=function(a){return B("ZeroClipboard.prototype.setHandCursor",L.debug),a="boolean"==typeof a?a:!!a,J(a),L.forceHandCursor=a,this},I.prototype.reposition=function(){return B("ZeroClipboard.prototype.reposition",L.debug),O()},I.prototype.receiveEvent=function(a,b){if(B("ZeroClipboard.prototype.receiveEvent",L.debug),"string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");c&&R.call(this,c,b)}},I.prototype.setCurrent=function(a){return B("ZeroClipboard.prototype.setCurrent",L.debug),I.activate(a),this},I.prototype.resetBridge=function(){return B("ZeroClipboard.prototype.resetBridge",L.debug),I.deactivate(),this},I.prototype.setTitle=function(a){if(B("ZeroClipboard.prototype.setTitle",L.debug),a=a||L.title||c&&c.getAttribute("title")){var b=N(d.bridge);b&&b.setAttribute("title",a)}return this},I.setDefaults=function(a){B("ZeroClipboard.setDefaults",L.debug),I.config(a)},I.prototype.addEventListener=function(a,b){return B("ZeroClipboard.prototype.addEventListener",L.debug),this.on(a,b)},I.prototype.removeEventListener=function(a,b){return B("ZeroClipboard.prototype.removeEventListener",L.debug),this.off(a,b)},I.prototype.ready=function(){return B("ZeroClipboard.prototype.ready",L.debug),d.ready===!0};var R=function(f,g){f=f.toLowerCase().replace(/^on/,"");var h=g&&g.flashVersion&&a(g.flashVersion)||null,i=c,j=!0;switch(f){case"load":if(h){if(!b(h))return R.call(this,"onWrongFlash",{flashVersion:h}),void 0;d.outdated=!1,d.ready=!0,d.version=h}break;case"wrongflash":h&&!b(h)&&(d.outdated=!0,d.ready=!1,d.version=h);break;case"mouseover":r(i,L.hoverClass);break;case"mouseout":L.autoActivate===!0&&I.deactivate();break;case"mousedown":r(i,L.activeClass);break;case"mouseup":s(i,L.activeClass);break;case"datarequested":var k=i.getAttribute("data-clipboard-target"),l=k?document.getElementById(k):null;if(l){var m=l.value||l.textContent||l.innerText;m&&this.setText(m)}else{var n=i.getAttribute("data-clipboard-text");n&&this.setText(n)}j=!1;break;case"complete":G(e)}var o=i,p=[this,g];return P.call(this,f,o,p,j)};"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return j=c&&c.id||null,I}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?(k=module.id||null,module.exports=I):window.ZeroClipboard=I}(); //zClip :: jQuery ZeroClipboard v1.1.1 - плагин для копирования текста в буфер обмена/*md5*/					var CryptoJS=CryptoJS||function(o,q){var l={},m=l.lib={},n=m.Base=function(){function a(){}return{extend:function(e){a.prototype=this;var c=new a;e&&c.mixIn(e);c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}}}(),j=m.WordArray=n.extend({init:function(a,e){a=this.words=a||[];this.sigBytes=e!=q?e:4*a.length},toString:function(a){return(a||r).stringify(this)},concat:function(a){var e=this.words,c=a.words,d=this.sigBytes,a=a.sigBytes;this.clamp();if(d%4)for(var b=0;b<a;b++)e[d+b>>>2]|=(c[b>>>2]>>>24-8*(b%4)&255)<<24-8*((d+b)%4);else if(65535<c.length)for(b=0;b<a;b+=4)e[d+b>>>2]=c[b>>>2];else e.push.apply(e,c);this.sigBytes+=a;return this},clamp:function(){var a=this.words,e=this.sigBytes;a[e>>>2]&=4294967295<<32-8*(e%4);a.length=o.ceil(e/4)},clone:function(){var a=n.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var e=[],c=0;c<a;c+=4)e.push(4294967296*o.random()|0);return j.create(e,a)}}),k=l.enc={},r=k.Hex={stringify:function(a){for(var e=a.words,a=a.sigBytes,c=[],d=0;d<a;d++){var b=e[d>>>2]>>>24-8*(d%4)&255;c.push((b>>>4).toString(16));c.push((b&15).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return j.create(c,b/2)}},p=k.Latin1={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return j.create(c,b)}},h=k.Utf8={stringify:function(a){try{return decodeURIComponent(escape(p.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return p.parse(unescape(encodeURIComponent(a)))}},b=m.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=j.create();this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=h.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,c=b.words,d=b.sigBytes,f=this.blockSize,i=d/(4*f),i=a?o.ceil(i):o.max((i|0)-this._minBufferSize,0),a=i*f,d=o.min(4*a,d);if(a){for(var h=0;h<a;h+=f)this._doProcessBlock(c,h);h=c.splice(0,a);b.sigBytes-=d}return j.create(h,d)},clone:function(){var a=n.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});m.Hasher=b.extend({init:function(){this.reset()},reset:function(){b.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);this._doFinalize();return this._hash},clone:function(){var a=b.clone.call(this);a._hash=this._hash.clone();return a},blockSize:16,_createHelper:function(a){return function(b,c){return a.create(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return f.HMAC.create(a,c).finalize(b)}}});var f=l.algo={};return l}(Math);(function(o){function q(b,f,a,e,c,d,g){b=b+(f&a|~f&e)+c+g;return(b<<d|b>>>32-d)+f}function l(b,f,a,e,c,d,g){b=b+(f&e|a&~e)+c+g;return(b<<d|b>>>32-d)+f}function m(b,f,a,e,c,d,g){b=b+(f^a^e)+c+g;return(b<<d|b>>>32-d)+f}function n(b,f,a,e,c,d,g){b=b+(a^(f|~e))+c+g;return(b<<d|b>>>32-d)+f}var j=CryptoJS,k=j.lib,r=k.WordArray,k=k.Hasher,p=j.algo,h=[];(function(){for(var b=0;64>b;b++)h[b]=4294967296*o.abs(o.sin(b+1))|0})();p=p.MD5=k.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,f){for(var a=0;16>a;a++){var e=f+a,c=b[e];b[e]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360}for(var e=this._hash.words,c=e[0],d=e[1],g=e[2],i=e[3],a=0;64>a;a+=4)16>a?(c=q(c,d,g,i,b[f+a],7,h[a]),i=q(i,c,d,g,b[f+a+1],12,h[a+1]),g=q(g,i,c,d,b[f+a+2],17,h[a+2]),d=q(d,g,i,c,b[f+a+3],22,h[a+3])):32>a?(c=l(c,d,g,i,b[f+(a+1)%16],5,h[a]),i=l(i,c,d,g,b[f+(a+6)%16],9,h[a+1]),g=l(g,i,c,d,b[f+(a+11)%16],14,h[a+2]),d=l(d,g,i,c,b[f+a%16],20,h[a+3])):48>a?(c=m(c,d,g,i,b[f+(3*a+5)%16],4,h[a]),i=m(i,c,d,g,b[f+(3*a+8)%16],11,h[a+1]),g=m(g,i,c,d,b[f+(3*a+11)%16],16,h[a+2]),d=m(d,g,i,c,b[f+(3*a+14)%16],23,h[a+3])):(c=n(c,d,g,i,b[f+3*a%16],6,h[a]),i=n(i,c,d,g,b[f+(3*a+7)%16],10,h[a+1]),g=n(g,i,c,d,b[f+(3*a+14)%16],15,h[a+2]),d=n(d,g,i,c,b[f+(3*a+5)%16],21,h[a+3]));e[0]=e[0]+c|0;e[1]=e[1]+d|0;e[2]=e[2]+g|0;e[3]=e[3]+i|0},_doFinalize:function(){var b=this._data,f=b.words,a=8*this._nDataBytes,e=8*b.sigBytes;f[e>>>5]|=128<<24-e%32;f[(e+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(f.length+1);this._process();b=this._hash.words;for(f=0;4>f;f++)a=b[f],b[f]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}});j.MD5=k._createHelper(p);j.HmacMD5=k._createHmacHelper(p)})(Math); //CryptoJS v3.0.2 (md5) code.google.com/p/crypto-js/*$T*/					(function(w){function ota(o){var a=[];for(var i in o)a.push(o[i]);return a;}function ots(o){var a="";for(var i in o)a+=","+i;return a.substr(1);}   var c={};w.$T=function(s,d){return(s in c)?c[s].apply(d, ota(d)):(c[s]=new Function(ots(d),"var p=[],print=function(){p.push.apply(p,arguments);};p.push('"+document.getElementById(s).innerHTML.replace(/[\r\n]/g," ").replace(/<%=(.*?)%>/g,"',$1,'").replace(/<%(.*?)%>/g,"');$1;p.push('")+"');return p.join('')")).apply(d, ota(d))}})(window); //Версия с заменой with на this + аргументы функции. ВНИМАНИЕ! Необязательные параметры всегда должны быть в конце, а также порядок всех параметров никогда не должен меняться/*$T with catch ($TT)*/	function $TT(n, p){try{return $T(n, p);}catch(e){jsf.alert('Произошла ошибка при рендеринге вкладки "' + n + '".<br>Сообщите об этой ошибке разработчикам приложения.<br>' + e);throw(e);}} //Рендеринг с алертом в случае возникновения ошибки/*compat - console*/	try { if ("console" in window == false) window.console = {}; if ("log" in console == false) console.log = function() {}; if ("dir" in console == false) console.dir = function() {}; if ("dirxml" in console == false) console.dirxml = function() {}; if ("info" in console == false) console.info = function() {}; if ("warn" in console == false) console.warn = function() {}; if ("error" in console == false) console.error = function() {}; } catch(e) {} //Добавляем объект console, если он отсутствует (для совместимости со старыми браузерами)/*compat - indexOf*/	if (!Array.prototype.indexOf) Array.prototype.indexOf = function(obj, start) { for (var i = (start || 0), j = this.length; i < j; i++) { if (this[i] === obj) return i; } return -1; }; //Добавляем объект Array.prototype.indexOf, если он отсутствует (для совместимости со старыми браузерами)/*compat - isArray*/	if (!Array.isArray) Array.isArray = function(a) { return Object.prototype.toString.call(a) === '[object Array]'; };/*compat - trim*/		if (!String.prototype.trim) String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, ''); };/*flash*/				(function(f,h,i){function k(a,c){var b=(a[0]||0)-(c[0]||0);return b>0||!b&&a.length>0&&k(a.slice(1),c.slice(1))}function l(a){if(typeof a!=g)return a;var c=[],b="";for(var d in a){b=typeof a[d]==g?l(a[d]):[d,m?encodeURI(a[d]):a[d]].join("=");c.push(b)}return c.join("&")}function n(a){var c=[];for(var b in a)a[b]&&c.push([b,'="',a[b],'"'].join(""));return c.join(" ")}function o(a){var c=[];for(var b in a)c.push(['<param name="',b,'" value="',l(a[b]),'" />'].join(""));return c.join("")}var g="object",m=true;try{var j=i.description||function(){return(new i("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(p){j="Unavailable"}var e=j.match(/\d+/g)||[0];f[h]={available:e[0]>0,activeX:i&&!i.name,version:{original:j,array:e,string:e.join("."),major:parseInt(e[0],10)||0,minor:parseInt(e[1],10)||0,release:parseInt(e[2],10)||0},hasVersion:function(a){a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0];return k(e,a)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return false;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=true;if(typeof a.hasVersionFail=="function")if(!a.hasVersionFail.apply(a))return false;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}var attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""};m=typeof a.useEncode!=="undefined"?a.useEncode:this.encodeParams;a.movie=a.swf;a.wmode=a.wmode||"opaque";delete a.fallback;delete a.hasVersion;delete a.hasVersionFail;delete a.height;delete a.id;delete a.swf;delete a.useEncode;delete a.width;var c=document.createElement("div");c.innerHTML=["<object ",n(attrs),">",o(a),"</object>"].join("");return c.firstChild}};f.fn[h]=function(a){var c=this.find(g).andSelf().filter(g);/string|object/.test(typeof a)&&this.each(function(){var b=f(this),d;a=typeof a==g?a:{swf:a};a.fallback=this;if(d=f[h].create(a)){b.children().remove();b.html(d)}});typeof a=="function"&&c.each(function(){var b=this;b.jsInteractionTimeoutMs=b.jsInteractionTimeoutMs||0;if(b.jsInteractionTimeoutMs<660)b.clientWidth||b.clientHeight?a.call(b):setTimeout(function(){f(b)[h](a)},b.jsInteractionTimeoutMs+66)});return c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject); // jQuery SWFObject v1.1.1 MIT/GPL @jon_neal    http://jquery.thewikies.com/swfobject//Тут содержатся стандартные функции javascriptvar jsf = new function() {	//Запросы	this.vkApi = vkApi;					//Запрос к API Вконтакте								JQUERY  ACCESS_TO_GLOBAL_VARS	this.myGetJSON = myGetJSON;			//Посылка запроса к серверу								JQUERY	this.query = jsfQuery;				//Более удобная посылка запроса к серверу				JQUERY                         ACCESS_TO_JSF_FUNCTIONS	this.vkInit = vkInit;				//Инициализация VK										        ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS		//Работа со строками	this.getEnd = getEnd;				//Окончание	this.getEnd2 = getEnd2;				//Окончание для дробных чисел (точность 0.5)	this.echoDate = echoDate;			//Выводит дату по unixtime	this.echoDate2 = echoDate2();		//Выводит дату по unixtime	this.timeAgoStr = timeAgoStr;		//N секунд/минут/часов/.../лет назад					                               ACCESS_TO_JSF_FUNCTIONS	this.timeAgoStr2 = timeAgoStr2;		//N секунд/минут/часов/.../лет назад					                               ACCESS_TO_JSF_FUNCTIONS	this.formatCode = formatCode;		//Замена tab'ов на переносы строк для code в execute	this.addVarToCode = addVarToCode;	//Добавить переменную в code для execute	this.eCodeStrgGet = eCodeStrgGet;	//Execute - storage.get		//Преобразования и вычисления	this.parseAge = parseAge;			//Узнать возраст по дате рождения, плохая версия	this.toPercent = toPercent;			//Преобразование деления в проценты	this.isNumber = jsfIsNumber;		//Является ли Number в человеческой форме	this.isInt = jsfIsInt;				//Является ли Int в человеческой форме	this.random = random;				//Рандом от min до max	this.rand = random;					//Рандом от min до max	this.base64_encode = base64_encode;	//base64_encode	this.base64_decode = base64_decode;	//base64_decode	this.replaceAll = replaceAll;		//replaceAll		//Работа с объектами и массивами	this.arrayLength = arrayLength;		//Количество элементов в объекте	this.arrayIsEmpty = arrayIsEmpty;	//Пуст ли объект	this.logObject = logObject;			//Логирование объекта	this.remArrElem = remArrElem;		//Удаляем элемент из массива	this.matrixIndexOf = matrixIndexOf;	//indexOf для двумерного массива	this.clog = clog;					//Вызывает console.log два раза		//Окна	this.alert = jsfAlert();			//Замена стандартному alert								JQUERY  ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS	this.modalShow = modalShow();		//Показать окно (нужны modalWindowFon и modalWindow)	JQUERY  ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS	this.metroShow = metroShow();		//Показать окно (нужны metroWindowFon и metroWindowCont)JQUERY  ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS	this.windowAlign = windowAlign;		//Выполняет выравнивание окна по вертикали				JQUERY  ACCESS_TO_GLOBAL_VARS	this.updateAlign = updateAlign;		//Обновляет положение окон по вертикали					JQUERY  ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS	this.showFrame = showFrame();		//Показать фрейм										JQUERY  ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS	this.attachHint = attachHint;		//Привязать подсказку к элементу						JQUERY		//Сжатие данных для сохранения в storage	this.parseInt = jsfParseInt;		//Аналог parseInt, но с системой счисления 85	this.toString = jsfToString;		//Аналог toString, но с системой счисления 85	this.packArray = packArray;			//Упаковывает массив чисел в строку						                               ACCESS_TO_JSF_FUNCTIONS	this.unpackArray = unpackArray;		//Распаковывает массив чисел из строки					                               ACCESS_TO_JSF_FUNCTIONS	this.parseOptions = parseOptions;	//Парсит опции с использованием unpackArray				                               ACCESS_TO_JSF_FUNCTIONS	this.packOptions = packOptions;		//Сжимает опции с использованием packArray				                               ACCESS_TO_JSF_FUNCTIONS	this.saveOptions = saveOptions;		//Сохраняет опции с использованием packArray			        ACCESS_TO_GLOBAL_VARS  ACCESS_TO_JSF_FUNCTIONS		//Константы	this.https = (window.location.protocol == "https:");	this.v = "1.0.33 beta2, 26.08.2014";	this.storageOK = true;		//Примерная попытка определения браузера	this.browser = {};	var detected = 0;	detected |= this.browser.msie		= !detected && ("v" == "\v" || navigator.userAgent.indexOf(' Trident/') != -1);	//IE10- IE11+	detected |= this.browser.opera		= !detected && (!!window.opera || navigator.userAgent.indexOf(' OPR/') != -1);	//Opera12- Opera13+	detected |= this.browser.firefox	= !detected && !!window.sidebar;												//Firefox	detected |= this.browser.chrome		= !detected && !!window.chrome;													//Chrome and other				//Запрос к API Вконтакте JQUERY ACCESS_TO_GLOBAL_VARS	function vkApi(method, params, callback, failNum, dontNeedExecuteErrors) {		if (window.location.protocol == "https:") params.https = 1;		VK.api(method, params, function(data) {			//callback не вызывается в IE7-						if ("error" in data) {				if (typeof(failNum) != "number") failNum = 0;				if (data.error.error_code == 1 && data.error.error_msg == "Unknown error occurred" && method == "photos.saveWallPhoto") return;				if (data.error.error_code == 3) return jsf.alert("Произошла ошибка №3 при работе с API. Попробуйте: 1) обновить страницу, 2) почистить кэш, 3) зайти в приложение с другого браузера. Отпишитесь, пожалуйста, разработчикам, какое действие помогло Вам убрать эту ошибку.");				if (data.error.error_code == 4) return jsf.alert("Произошла ошибка №4 при работе с API. Данная ошибка возникает, если у Вас проблемы с куками. Попробуйте: 1) обновить страницу, 2) выйти из контакта и войти заново, 3) почистить кэш, 4) зайти в приложение с другого браузера. Отпишитесь, пожалуйста, разработчикам, какое действие помогло Вам убрать эту ошибку.");				if (data.error.error_code == 5 && data.error.error_msg == "User authorization failed: user is deactivated.") return; //Пользователь удалил свою страницу				if (data.error.error_code == 6) return setTimeout(function() { vkApi(method, params, callback, failNum); }, 500); //Слишком частые запросы				if (data.error.error_code == 10 && failNum < 4) return setTimeout(function() { vkApi(method, params, callback, failNum + 1); }, 2000); //Внутренняя ошибка сервера, нужно повторить запрос позже				if (data.error.error_code == 10) return jsf.alert("Произошла ошибка API на сайте Вконтакте.<br>Попробуйте выполнить действие позже.");				if (data.error.error_code == 13 && data.error.error_msg == "Runtime error occurred during code invocation: Too many API calls") return; //Замечено в wall.get в execute				if (data.error.error_code == 10007) return; //Пользователь отказался от поста на стене				if (!window.JSON) return;								if ("execute_errors" in data) data.error.execute_errors = data.execute_errors;				alert("При выполнении запроса к API ВКонтакте произошла ошибка:\n\n" + JSON.stringify(data.error));				var queryParams = {qTo: "server3", method: "error", viewer_id: 0, shortUrl: "1-jsf.js", fullUrl: "1-jsf.js", line: "~100", message: "VK API error: " + JSON.stringify(data.error)};				if (typeof(query) == "object" && query.viewer_id) queryParams.viewer_id = query.viewer_id;				jsf.query(queryParams);				return;			}						if ("execute_errors" in data && !dontNeedExecuteErrors) {				if (!window.JSON) return;				alert("При выполнении запроса к API ВКонтакте произошла ошибка:\n\n" + JSON.stringify(data.execute_errors));				var queryParams = {qTo: "server3", method: "error", viewer_id: 0, shortUrl: "1-jsf.js", fullUrl: "1-jsf.js", line: "~100", message: "EXECUTE error: " + JSON.stringify(data.execute_errors)};				if (typeof(query) == "object" && query.viewer_id) queryParams.viewer_id = query.viewer_id;				jsf.query(queryParams);				return;			}						if ("response" in data) {				if (typeof(data.response) == "object" && data.response) {					if (data.response.storageOK === false) jsf.storageOK = false;					if (typeof(data.response.storageLens) == "object" && Array.isArray(data.response.storageLens)) { for (var i = 0; i < data.response.storageLens.length; i++) { if (data.response.storageLens[i] === null) jsf.storageOK = false; } }				}				if (callback) callback(data.response);				return;			}		});				//Обращения к глобальным переменным:		//1) VK (без window)		//2) #loader - необязательно (отсутствие не приводит к ошибке)	}				//Посылка запроса к серверу JQUERY	function myGetJSON(url, params, callback) {		if (window.location.protocol == "https:") {			if (url.substr(0, 21) == "http://188.93.22.205/") url = "https://oldapi.profilevk.com/" + url.substr(21);			if (url.substr(0, 20) == "http://188.93.20.78/") url = "https://api.profilevk.com/" + url.substr(20);			if (url.substr(0, 25) == "http://188.93.20.78:8080/") url = "https://api.profilevk.com/offers/" + url.substr(25);			if (url.substr(0, 25) == "http://188.93.20.78:8081/") url = "https://api.profilevk.com/server1/" + url.substr(25);			if (url.substr(0, 25) == "http://188.93.20.78:8082/") url = "https://api.profilevk.com/server2/" + url.substr(25);			if (url.substr(0, 25) == "http://188.93.20.78:8083/") url = "https://api.profilevk.com/server3/" + url.substr(25);			if (url.substr(0, 25) == "http://188.93.20.78:8084/") url = "https://api.profilevk.com/server4/" + url.substr(25);		}		if (params.post) {			delete params.post;			if (url.substr(url.length - 11) == "?callback=?") url = url.substr(0, url.length - 11);			$.post(url, params, function(data) {				if (callback) callback(data);			}, "json");		}else{			$.getJSON(url, params, function(data) {				if (callback) callback(data);			});		}	}				//Стандартный запрос JQUERY    function jsfQuery(params, callback) {		params.viewer_id = query.viewer_id;		params.auth_key = query.auth_key;				var url;		switch (params.qTo) {			case "offers":  url = "188.93.20.78:8080"; break;			case "server1": url = "188.93.20.78:8081"; break;			case "server2": url = "188.93.20.78:8082"; break;			case "server3": url = "188.93.20.78:8083"; break;			case "server4": url = "188.93.20.78:8084"; break;			case "new": url = "188.93.20.78"; break;			case "old": url = "188.93.22.205"; break;			default: url = "188.93.20.78:8081";		}				delete params.qTo;		myGetJSON("http://" + url + "/?callback=?", params, callback);				//Обращения к функциям jsf:		//1) myGetJSON    }				//N секунд/минут/часов/.../лет назад	function timeAgoStr(time) {		if (time < 0) time = 0;		if (time < 60) return time + " " + getEnd(time, "секунду", "секунды", "секунд") + " назад";		if (time < 3600) { time = Math.floor(time/60); return   time   + " " + getEnd(time, "минуту", "минуты", "минут") + " назад"; }		if (time < 36000) { time = Math.floor(time/1800); return (time/2) + " " + getEnd2(time/2, "час", "часа", "часов") + " назад"; }		if (time < 86400) { time = Math.floor(time/3600); return   time   + " " + getEnd(time, "час", "часа", "часов") + " назад"; }		if (time < 864000) { time = Math.floor(time/43200); return (time/2) + " " + getEnd2(time/2, "день", "дня", "дней") + " назад"; }		if (time < 2592000) { time = Math.floor(time/86400); return   time   + " " + getEnd(time, "день", "дня", "дней") + " назад"; }		if (time < 25920000) { time = Math.floor(time/1296000); return (time/2) + " " + getEnd2(time/2, "месяц", "месяца", "месяцев") + " назад"; }		if (time < 31536000) { time = Math.floor(time/2592000); return   time   + " " + getEnd(time, "месяц", "месяца", "месяцев") + " назад"; }		if (time < 315360000) { time = Math.floor(time/15768000); return (time/2) + " " + getEnd2(time/2, "год", "года", "лет") + " назад"; }		if (true&&true&&true) { time = Math.floor(time/31536000); return   time   + " " + getEnd(time, "год", "года", "лет") + " назад"; }				//Обращения к функциям jsf:		//1) getEnd		//2) getEnd2	}				//N секунд/минут/часов/.../лет назад	function timeAgoStr2(time, curTime) {		var d1 = new Date(time * 1000),    day1 = d1.getDate(), month1 = d1.getMonth(), year1 = d1.getFullYear();		var d2 = new Date(curTime * 1000), day2 = d2.getDate(), month2 = d2.getMonth(), year2 = d2.getFullYear();		if (day1 == day2 && month1 == month2 && year1 == year2) return "Сегодня в " + echoDate(time, -2);		var d2 = new Date((curTime - 86400) * 1000), day2 = d2.getDate(), month2 = d2.getMonth(), year2 = d2.getFullYear();		if (day1 == day2 && month1 == month2 && year1 == year2) return "Вчера в " + echoDate(time, -2);		return echoDate(time, 2, " в ", true);				//Обращения к функциям jsf:		//1) echoDate	}				//Замена tab'ов на переносы строк для code в execute	function formatCode(s) {		var cur = 0, min = 1000, isLast = true;		for (var i = s.length - 1; i >= 0; i--) {			if (s.charAt(i) == "	") {				cur++;			}else{				if (cur > 0 && cur < min && isLast == false) min = cur;				cur = 0;				isLast = false;			}		}		if (cur > 0 && cur < min) min = cur;		if (min > 0 && min < 1000) {			var tm = "";			while (min > 0) {				tm += "	";				min--;			}			s = s.replace(new RegExp(tm, "g"), "\n");			if (s.charAt(0) == "\n") s = s.substr(1);		}		return s;	}				//Добавить переменную в code для execute	function addVarToCode(varName, value) {		return "var " + varName + " = " + (typeof(value)=="string"?'"':'') + value + (typeof(value)=="string"?'"':'') + ";\n";	}				//Execute - storage.get	function eCodeStrgGet(varName, keyName) {		var varName2 = (varName.substr(0, 4) == "var " ? varName.substr(4) : varName);		if (typeof(keyName) != "string") keyName = '"' + varName2 + '"';		return varName + ' = API.storage.get({key: ' + keyName + '}); storageLens.push(' + varName2 + '.length); if (!' + varName2 + ') ' + varName2 + ' = "";';	}				//Окончание	function getEnd(a, s1, s2, s3) {		if ((a % 100 > 10 && a % 100 < 20) || (a % 10 == 0) || (a % 10 >= 5)) return s3;		if (a % 10 == 1) return s1; else return s2;	}				//Окончание для дробных чисел (точность 0.5)	function getEnd2(a, s1, s2, s3) {		if ((a % 100 > 10 && a % 100 < 20) || (a % 10 == 0) || (a % 10 >= 5)) return s3;		if (a % 10 == 1 && Math.floor(a) == a) return s1; else return s2;	}				//Аналог parseInt, но с системой счисления 85 (85^5=4437053125, 2^32 = 4294967296)	function jsfParseInt(s) {		var r = 85;		var ans = 0;		var tm = 1;		for (var i = s.length - 1; i >= 0; i--) {			var code = s.charCodeAt(i);			switch (code) {				case 126: code = 33; break; // ! 				case 125: code = 34; break; // " 				case 124: code = 36; break; // $ 				case 123: code = 38; break; // & 				case 122: code = 39; break; // ' 				case 121: code = 43; break; // + 				case 120: code = 47; break; // / 				case 119: code = 60; break; // < 				case 118: code = 62; break; // > 				case 117: code = 92; break; // \ 			}			ans += (code - 32) * tm;			tm *= r;		}		return ans;	}				//Аналог toString, но с системой счисления 85 (85^5=4437053125, 2^32 = 4294967296)	function jsfToString(num) {		var r = 85;		var ans = "";		while (num > 0) {			var code = num % r + 32;			switch (code) {				case 33: code = 126; break; // ! 				case 34: code = 125; break; // " 				case 36: code = 124; break; // $ 				case 38: code = 123; break; // & 				case 39: code = 122; break; // ' 				case 43: code = 121; break; // + 				case 47: code = 120; break; // / 				case 60: code = 119; break; // < 				case 62: code = 118; break; // > 				case 92: code = 117; break; // \ 			}			ans = String.fromCharCode(code) + ans;			num = (num - num % r) / r;		}		return ans;	}		//Символы, которые мы заменяем	//33 !  -  5 байт	//34 "  -  экранируется, могут возникнуть проблемы с передачей, а также это испортит json	//36 $  -  6 байт	//38 &  -  &amp;	//39 '  -  5 байт	//43 +  -  не вызывает абсолютно никаких проблем, заменён на всякий случай	//47 /  -  экранируется (необязательно пропускать, но лучше пропустить)	//60 <  -  &lt;	//62 >  -  &gt;	//92 \  -  экранируется, могут возникнуть проблемы с передачей		//Символы, которые мы не заменяем	//48 0  -  при записи единичного нуля удаляет переменную, но "00" работает нормально, поэтому нет смысла пропускать	//127   -  странный символ какой-то, но мы его итак не используем	//[]{}  -  скобки				//Упаковывает массив чисел в строку (точнее в массив строк, каждая строка максимум 4096 байт), для пустых массивов будет возвращено [""]	function packArray(a, options) {		if (typeof(options) != "object") options = {};		var ans = [];		var s = "";		var curNum = 0;		var len = a.length;				if ("pattern" in options) { //Случай, когда указан паттерн			if (typeof(options.pattern) != "object" || "length" in options.pattern == false) throw("options.pattern is not array");			if (a.length % options.pattern.length != 0) {				if ("remNeedlessItems" in options && options.remNeedlessItems) {					a.length = a.length - (a.length % options.pattern.length);				}else{					throw("a.length % " + options.pattern.length + " != 0");				}			}			for (var sum = 0, i = options.pattern.length - 1; i >= 0; i--) sum += options.pattern[i];			if (sum > 4096) throw("options.pattern is too big");			var maxNum = Math.floor(4096 / sum) * options.pattern.length;		}else{			var maxNum = 819;			options.pattern = [5];		}				for (var i = 0; i < len; i++) {			if (curNum == maxNum) {				ans.push(s);				s = "";				curNum = 0;			}			curNum++;			var tm = jsfToString(a[i]);			while (tm.length < options.pattern[i % options.pattern.length]) tm = " " + tm;			s += tm;		}		ans.push(s);		return ans;				//Обращения к функциям jsf:		//1) jsfToString	}				//Распаковывает массив чисел из строки	function unpackArray(s, options) {		if (typeof(options) != "object") options = {};		var ans = [];		var len = s.length;				if ("pattern" in options) { //Случай, когда указан паттерн			if (typeof(options.pattern) != "object" || "length" in options.pattern == false) throw("options.pattern is not array");		}else{			options.pattern = [5];		}				for (var x = options.pattern[0] - 1; x < len; x += options.pattern[ans.length % options.pattern.length]) {			ans.push(jsfParseInt(s.substr(x - (options.pattern[ans.length % options.pattern.length] - 1), options.pattern[ans.length % options.pattern.length])));		}				if (ans.length % options.pattern.length != 0) {			if ("remNeedlessItems" in options && options.remNeedlessItems) {				ans.length = ans.length - (ans.length % options.pattern.length);			}else{				throw("ans.length % " + options.pattern.length + " != 0");			}		}				return ans;				//Обращения к функциям jsf:		//1) jsfParseInt	}				//Парсит опции с использованием unpackArray	function parseOptions(s) {		if (s == "" || s == "{}") return {usePack: true};		if (!window.JSON) throw("My own exception: oldBrower");		try {			var tm = JSON.parse(s);			unzip(tm);			tm.usePack = true;			return tm;		} catch(e) {			try { sendError("~361", "cant parse options");		} catch(e) {}			try { sendError("~362", e);							} catch(e) {}			try { sendError("~363", s);							} catch(e) {}			try { sendError("~364", JSON.stringify({e: e}));	} catch(e) { sendError("~365", JSON.stringify({e: e})); }			return {usePack: true};		}				function sendError(line, message) {			var queryParams = {qTo: "server3", method: "error", viewer_id: 0, shortUrl: "1-jsf.js", fullUrl: "1-jsf.js", line: line, message: message};			if (typeof(query) == "object" && query.viewer_id) queryParams.viewer_id = query.viewer_id;			jsf.query(queryParams);		}				function unzip(a) {			if (typeof(a) != "object") return;			for (var key in a) {				if (typeof(a[key]) == "object") {					unzip(a[key]);				}else				if (typeof(a[key]) == "string" && key.length >= 5 && key.substr(0, 3) == "$ar" && key.charCodeAt(3) >= 49 && key.charCodeAt(3) <= 53 && key[4] == "-") {					a[key.substr(5)] = unpackArray(a[key], {pattern: [key.charCodeAt(3) - 48]});					delete a[key];				}			}		}				//Обращения к функциям jsf:		//1) unpackArray		//2) jsfParseInt	}				//Сжимает опции с использованием packArray	function packOptions(sOptions) {		if (!window.JSON) throw("My own exception: oldBrower");		try {			var tm = {}; for (var i in sOptions) tm[i] = sOptions[i];			delete tm.usePack;			return JSON.stringify(zip(tm));		} catch(e) {			try { sendError("~371", "cant pack options");					} catch(e) {}			try { sendError("~372", e);										} catch(e) {}			try { sendError("~373", JSON.stringify({sOptions: sOptions}));	} catch(e) {}			try { sendError("~374", JSON.stringify({e: e}));				} catch(e) { sendError("~375", JSON.stringify({e: e})); }			return "{}";		}				function sendError(line, message) {			var queryParams = {qTo: "server3", method: "error", viewer_id: 0, shortUrl: "1-jsf.js", fullUrl: "1-jsf.js", line: line, message: message};			if (typeof(query) == "object" && query.viewer_id) queryParams.viewer_id = query.viewer_id;			jsf.query(queryParams);		}				function zip(a) {			if (typeof(a) != "object" || a === null) return a;			if (Array.isArray(a)) {				var ans = [];				for (var i = 0; i < a.length; i++) {					if (typeof(a[i]) == "object" && a[i] !== null) ans[i] = zip(a[i]); else ans[i] = a[i];				}			}else{				var ans = {};				for (var i in a) {					var bite = isGoodArray(a[i]);					if (bite > 0) ans["$ar" + bite + "-" + i] = packArray(a[i], {pattern: [bite]})[0]; else					if (typeof(a[i]) == "object" && a[i] !== null) ans[i] = zip(a[i]); else ans[i] = a[i];				}			}			return ans;						function isGoodArray(a) {				if (!Array.isArray(a) || a.length < 2) return 0;				var max = 0;				var size = 0;				for (var i = a.length - 1; i >= 0; i--) {					if (typeof(a[i]) != "number" || a[i] < 0 || Math.floor(a[i]) != a[i] || a[i] > 4294967295) return 0;					if (max < a[i]) max = a[i];					size += ("" + a[i]).length;				}				if (true) {					var bite = 5;					if      (max < 85) bite = 1;					else if (max < 7225) bite = 2;					else if (max < 614125) bite = 3;					else if (max < 52200625) bite = 4;				}				if (a.length * bite + 5 < size + a.length - 1) return bite; 			}		}				//Обращения к функциям jsf:		//1) packArray		//2) jsfToString	}				//Сохраняет опции с использованием packArray	function saveOptions(sOptions) {		var hasAppVar = (typeof(window.app) == "function" || typeof(window.app) == "object");				if (typeof(sOptions) == "undefined") {			if (!hasAppVar || "sOptions" in window.app == false) return; else sOptions = window.app.sOptions;		}		if (typeof(sOptions) != "object") sOptions = {};				if (!window.JSON) throw("My own exception: oldBrower");		try {			var s = sOptions.usePack ? packOptions(sOptions) : JSON.stringify(sOptions);		} catch(e) {			var s = sOptions.usePack ? JSON.stringify(sOptions) : "{}";		}		if (!hasAppVar || app.storageOK) vkApi("storage.set", {v: "5.9", key: "options", value: s});				//Обращения к глобальным переменным:		//1) app.sOptions		- необязательно (отсутствие не приводит к ошибке)		//2) VK (без window)	- благодаря jsf.vkApi()				//Обращения к функциям jsf:		//1) packOptions		- при отсутствии сжатие не используется		//2) packArray			- при отсутствии сжатие не используется		//3) jsfToString		- при отсутствии сжатие не используется	}				//Показать фрейм JQUERY ACCESS_TO_GLOBAL_VARS	function showFrame() {		var myId = 0;		var mySex = 0;		var myAge = 0;		var myCity = 0;		var myCountry = 0;		var noOpacity = false;				var frameStarted = 0;		//Фрейм уже был выбран		var timerDelay = 0;			//Время показа кнопки		var appLoaded = false;		//Загружено ли приложение		var isItGroup = false;		//Группа ли это		var isGroupDone = false;	//Завершена ли группа		var myFrameCont;			//Элемент				return (function(target, params, size) {			var specialCase = false;						//Задание начальных установок			if (typeof(target) == "object" && "init" in target && target.init == true) {				if ("id" in target) myId = parseInt(target.id, 10);				if ("sex" in target) mySex = parseInt(target.sex, 10);				if ("age" in target) myAge = parseInt(target.age, 10);				if ("city" in target) myCity = parseInt(target.city, 10);				if ("country" in target) myCountry = parseInt(target.country, 10);				if ("noOpacity" in target && ("query" in window == false || query.api_id != 638461)) noOpacity = target.noOpacity;				specialCase = true;			}						//Приложение загружено			if (typeof(target) == "object" && "appLoaded" in target && target.appLoaded == true) {				if (isItGroup == false && timerDelay >= 0) setTimeout(hideFrame, timerDelay);				appLoaded = true;				specialCase = true;			}						//Элементарные проверки			if (specialCase || frameStarted == 1) return;			if (typeof(target) != "object" || typeof(params) != "object" || typeof(size) != "object") return;			if ("allW" in size == false || "allH" in size == false || "shiftX" in size == false || "shiftY" in size == false) return;			if ("timerDelay" in params == false && "checkGroup" in params == false) return;			if ("timerDelay" in params == true && "checkGroup" in params == true) return;			if ("frameLink" in params == false) return;						//Таргетинг - часть 1			if ("sex" in target && mySex != target.sex) return;			if ("noHttps" in target && window.location.protocol == "https:") return;			if ("percent" in target && myId % 100 >= target.percent) return;			if ("rand" in target && ("myRand" in target ? target.myRand : Math.random()) > target.rand) return;			if ("checkGroup" in params && "app" in window && "sOptions" in window.app && "gOK" in window.app.sOptions && window.app.sOptions.gOK.indexOf(+params.checkGroup) != -1) return;						//Таргетинг - часть 2			if ("allowNoAge" in target == false || target.allowNoAge == false || myAge != 0) {				if ("minAge" in target && myAge < target.minAge) return;				if ("maxAge" in target && myAge > target.maxAge) return;			}			if ("allowNoCity" in target == false || target.allowNoCity == false || myCity != 0) {				if ("city" in target && target.city.length > 0 && target.city.indexOf(myCity) == -1) return;			}			if ("allowNoCountry" in target == false || target.allowNoCountry == false || myCountry != 0) {				if ("country" in target && target.country.length > 0 && target.country.indexOf(myCountry) == -1) return;			}						//Делаем это			frameStarted = 1;			if ("checkGroup" in params) {				isItGroup = true;				var groupsInterval = setInterval(function() {					vkApi("groups.isMember", {group_id: params.checkGroup}, function(data) {						if (data == 1) {							clearInterval(groupsInterval);							hideFrame();							isGroupDone = true;							if ("app" in window && "sOptions" in window.app) {								if ("gOK" in window.app.sOptions == false) window.app.sOptions.gOK = [];								if (window.app.sOptions.gOK.indexOf(+params.checkGroup) == -1) {									window.app.sOptions.gOK.push(+params.checkGroup);									if (window.app.sOptions.gOK.length > 50) window.app.sOptions.gOK = window.app.sOptions.gOK.slice(window.app.sOptions.gOK.length - 50);									saveOptions();								}							}						}					});				}, 1000);			}else{				timerDelay = params.timerDelay;			}						//Создаём контейнер			myFrameCont = document.createElement("div");			myFrameCont.className = "myFrameCont";			myFrameCont.style.cssText = "position:absolute; z-index:1000000000; width:" + (size.allW - size.shiftX) + "px; height:" + (size.allH - size.shiftY) + "px; overflow:hidden; background-color:#ffffff;"; //Перекрытие алертами и подсказками не очень страшно			myFrameCont.style.display = "none";			if (!noOpacity) {				myFrameCont.style.opacity = "0";				myFrameCont.style.filter  = "alpha(opacity=0)";			}						//Создаём фрейм			var myFrame = createFrame(params.frameLink, size.allW, size.allH,   "position:absolute; left:-" + size.shiftX + "px; top:-" + size.shiftY + "px; border:none;");			if ("noSandbox" in params == false || params.noSandbox != true) myFrame.sandbox = "allow-scripts allow-forms allow-same-origin allow-top-navigation";			myFrame.onload = function(event) {				if ("frameLink2" in params) {					myFrame.contentWindow.document.getElementById("allContent").style.display = "none";					var myFrame2 = createFrame(params.frameLink2, size.allW, size.allH,   "position:absolute; top:0px; left:0px; border:none;");					myFrame2.onload = function(event) {						if (isGroupDone) return;						changeFrame(myFrame2);					}					myFrame.contentWindow.document.body.style.margin = "0px";					myFrame.contentWindow.document.body.style.padding = "0px";					myFrame.contentWindow.document.body.appendChild(myFrame2);				}else{					if (isGroupDone) return;					changeFrame(myFrame);				}				function changeFrame(myFrame) {					if ("resetStyleToElem" in params) {						myFrame.contentWindow.document.getElementById("allContent").style.display = "none";						myFrame.contentWindow.document.body.style.margin = "0px";						myFrame.contentWindow.document.body.style.padding = "0px";						myFrame.contentWindow.document.getElementById(params.resetStyleToElem).cssText = "position:absolute; top:0px; left:0px; border:none;";					}					if ("callFunct" in params) {						try { myFrame.contentWindow.frameFunct.apply(null, params.callFunct); } catch(e) {}					}					if (isItGroup == false) setTimeout(hideFrame, 10000);					if (appLoaded && isItGroup == false && timerDelay >= 0) setTimeout(hideFrame, timerDelay);					myFrameCont.style.display = "block";				}			};			myFrameCont.appendChild(myFrame);			document.body.appendChild(myFrameCont);						//Добавляем событие мыши			$(document.body).on("mousemove", function(event) {				myFrameCont.style.left = Math.floor(event.clientX - (size.allW - size.shiftX) / 2) + "px";				myFrameCont.style.top = Math.floor(event.clientY - (size.allH - size.shiftY) / 2) + "px";			});					});				function hideFrame() {			try { myFrameCont.style.display = "none"; } catch(e) {}			try { document.body.removeChild(myFrameCont); } catch(e) {}			try { $(".myFrameCont").hide(); } catch(e) {}		}				function createFrame(link, width, height, cssText) {			var div = document.createElement("iframe");			div.src = link;			div.width = width;			div.height = height;			div.scrolling = "no";			div.frameborder = "no";			div.style.cssText = cssText;			return div;		}				//Обращения к глобальным переменным:		//1) app.sOptions	- необязательно (отсутствие не приводит к ошибке)		//2) VK (без window)- благодаря jsf.vkApi()				//Обращения к функциям jsf:		//1) vkApi			- обязательно только при использовании параметра checkGroup				//Описание "target":		//sex				- пол		//noHttps			- только без https		//percent			- процент пользователей		//rand				- вероятность		//myRand			- заданное заранее значение rand				//Описание "target":		//minAge			- минимальный возраст		//maxAge			- максимальный возраст		//allowNoAge		- разрешено без указания возраста		//city[]			- доступные города		//allowNoCity		- разрешено без указания города		//country[]			- доступные страны		//allowNoCountry	- разрешено без указания страны				//Описание "params":		//timerDelay		- время показа кнопки		//frameLink			- ссылка на фрейм		//frameLink2		- ссылка на фрейм внутри фрейма		//resetStyleToElem	- сбросить стиль для этого элемента (если указан frameLink2, то действует на фрейм frameLink2)		//callFunct			- вызвать функцию в фрейме с указанным массивом параметров (если указан frameLink2, то действует на фрейм frameLink2)		//checkGroup		- проверка группы	}				//Узнать возраст по дате рождения, плохая версия	function parseAge(bdate, theTime) {		bdate = bdate.split('.');		if (bdate.length == 3) return Math.floor((theTime - (new Date(bdate[2], bdate[1] - 1, bdate[0])).getTime() / 1000) / 31556926); else return 0;	}				//Преобразование деления в проценты	function toPercent(a, b) {		return (b == 0 ? 0 : Math.round(a / b * 100));	}				//Выводит дату по unixtime (отрицательные bit меняются на положительные и убирается дата, "shortYear" - краткий год)	function echoDate(time, bit, sep, shortYear) {		var d = new Date(time * 1000);		var s = "";		if (typeof(bit) == "number" && bit < 0) {			bit = -bit;		}else{			s += tm(d.getDate()) + "." + tm(d.getMonth() + 1) + "." + (bit === "shortYear" || shortYear ? d.getFullYear().toString().substr(2) : d.getFullYear());		}		if (typeof(bit) == "number") {			if (bit >= 1) s += (sep?sep:"") + d.getHours();			if (bit >= 2) s += ":" + tm(d.getMinutes());			if (bit >= 3) s += ":" + tm(d.getSeconds());		}		return s;				function tm(a) {			if (a < 10) return "0" + a; else return a;		}	}				//Выводит дату по unixtime	function echoDate2() {		var months = ["января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"];		return (function(time, bit, sep) {			var d = new Date(time * 1000);			var s = d.getDate() + " " + months[d.getMonth()] + " " + d.getFullYear() + " года";			if (typeof(bit) == "number") {				if (bit >= 1) s += sep + d.getHours();				if (bit >= 2) s += ":" + tm(d.getMinutes());				if (bit >= 3) s += ":" + tm(d.getSeconds());			}			return s;						function tm(a) {				if (a < 10) return "0" + a; else return a;			}		});	}				//Привязать подсказку к элементу JQUERY	function attachHint(cont, elem, text, options) {		if (typeof(options) != "object") options = {};		if ("maxWidth" in options == false) options.maxWidth = 300;				var hint = document.createElement("div");		hint.style.cssText = "position: absolute; z-index: 1000000000; left: 0px; top: 0px; background-color: #ffffff; padding: 10px; border: 1px solid #999; box-shadow: 0px 0px 3px #000; font-family: Tahoma; font-size: 11px; max-width: " + options.maxWidth + "px; cursor: default !important; " + (options.leftAlign ? "" : "text-align: center;"); //Подсказка всегда появляется в конце, поэтому z-index можно указать любой или убрать вообще		hint.innerHTML = text;				$(cont).on("mouseover", elem, function(event) {			if ("condition" in options && options.condition() == false) return;			if ($(document.body).has(hint).length == 0) document.body.appendChild(hint);			if ("staticHint" in options && options.staticHint) {				var tm = $(this).offset().left + $(this).outerWidth() / 2 - $(hint).outerWidth() / 2;				if (tm < 0) tm = 0;				$(hint).css("left", tm + "px");				if ("toDown" in options && options.toDown || options.autoDown && $(this).offset().top - $(hint).outerHeight() - 10 < $(document).scrollTop()) {					$(hint).css("top", (event.pageY + 20) + "px");				}else{					$(hint).css("top", ($(this).offset().top - $(hint).outerHeight() - 10) + "px");				}			}		});				if ("staticHint" in options == false || !options.staticHint) {			$(cont).on("mousemove", elem, function(event) {				$(hint).css("left", (event.pageX - $(hint).outerWidth() / 2) + "px");				if ("toDown" in options && options.toDown || options.autoDown && $(this).offset().top - $(hint).outerHeight() - 10 < $(document).scrollTop()) {					$(hint).css("top", (event.pageY + 20) + "px");				}else{					$(hint).css("top", (event.pageY - $(hint).outerHeight() - 10) + "px");				}			});		}				$(cont).on("mouseout", elem, function(event) {			if ($(document.body).has(hint).length > 0) document.body.removeChild(hint);		});				if (options.hideOnClick) {			$(cont).on("click", elem, function(event) {				if ($(document.body).has(hint).length > 0) document.body.removeChild(hint);			});		}				//Описание "options":		//staticHint	- фиксированное положение		//toDown		- подсказка внизу		//condition		- функция, вызывающаяся перед каждым показом подсказки (если false, то подсказка показана не будет)		//hideOnClick	- скрывать подсказку при клике		//maxWidth		- максимальная ширина подсказки		//leftAlign		- выравнивание по левому краю	}				//Замена стандартному alert	function jsfAlert() {		var cash = [];						//Кэш для алертов		var intId;							//Для setTimeout		var div1, div2, div3, div4, div5;	//Элементы		var initializated = false;			//Произведена ли инициализация		var opened = false;					//Открыто ли окно сейчас				returnFunct.close = closeFunct;		returnFunct.windowAlign = updateWindowAlign;		if (document.addEventListener) document.addEventListener("keyup", onKeyPress, false); else document.attachEvent("keyup", onKeyPress, false);		onDOMLoaded();		return returnFunct;				function cashShift(withNewWindow) {			if (cash.length <= 0) return null;			var a = cash.shift();			if (withNewWindow) returnFunct(a.s, a.options);			return;		}				function onDOMLoaded() {			if (!document.body) return setTimeout(onDOMLoaded, 50);						//Создание элементов			div1 = document.createElement("div");							//Фон			div2 = document.createElement("div");							//Белое окно			div3 = document.createElement("div");							//Надпись			div4 = document.createElement("input"); div4.type = "button";	//Кнопка ОК			div5 = document.createElement("input"); div5.type = "button";	//Кнопка Отмена			div2.appendChild(div3);			div2.appendChild(div4);			div2.appendChild(div5);						//Стили			div1.style.cssText = "display: none; position: fixed; z-index: 1000000000; left: 0; top: 0; width: 100%; height: 100%; background: #000;";			div2.style.cssText = "display: none; position: fixed; z-index: 1000000000; left: 50%; top: 250px; min-width: 200px; max-width: 80%; height: auto; margin-left: 0px; background-color: #ffffff; border-radius: 10px; -moz-border-radius: 10px; -webkit-border-radius: 10px; border: 2px solid #000000; padding: 15px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; text-align: center; cursor: default;";			div4.style.cssText = "display: inline-block; width: 120px; margin-top: 10px;"; div4.value = "OK"; div4.onclick = function() { closeFunct(returnFunct.onOK); };			div5.style.cssText = "display: inline-block; width: 120px; margin-top: 10px; margin-left: 5px;"; div5.value = "Отмена"; div5.onclick = function() { closeFunct(returnFunct.onCancel); };						//Добавление элементов			document.body.appendChild(div1);			document.body.appendChild(div2);						//Показ алерта, если его уже кто-то успел вызвать			initializated = true;			cashShift(true);		}				function returnFunct(s, options) {			if (typeof(options) != "object") options = {autohide: options};			//Элементы не созданы или окно уже есть на экране			if (!initializated || opened) return cash.push({s: s, options: options});			//Сохраняем параметры текущего показа			returnFunct.onOK = options.onOK;			returnFunct.onCancel = options.onCancel;			opened = true;						//Сброс стиля для div2			div2.style.width = "auto";			div2.style.left = "0";			div2.style.marginLeft = "0px";			div2.style.opacity = "1";						//Обновление текста и фона			div3.innerHTML = s;			div2.style.boxShadow = (options.autohide ? "0px 0px 15px #000" : "0px 0px 5px #000");			div1.style.opacity = (options.autohide ? "0" : "0.5"); div1.style.filter = (options.autohide ? "alpha(opacity=0)" : "alpha(opacity=50)");			div4.style.display = (options.noButton ? "none" : "inline-block");			div5.style.display = (options.cancelButton ? "inline-block" : "none");			div3.style.textAlign = (options.leftAlign ? "left" : "center");			div2.style.opacity = "0"; div1.style.display = "block"; div2.style.display = "block";			updateSizes();						//Автоскрытие			if (options.autohide) intId = setTimeout(function() {				try {					$(div2).animate({opacity: 0.4}, 200, "linear", div4.onclick);				} catch(e) {					setTimeout(div4.onclick, 200);				}			}, 2000);						function updateSizes() {				var width = div2.offsetWidth;				if (width == 0) return setTimeout(updateSizes, 50); else div2.style.opacity = "1";								div2.style.width = (div2.clientWidth - 30) + "px";				div2.style.left = "50%";				div2.style.marginLeft = Math.floor(-width/2) + "px";				try { windowAlign(div2, {noScroll: true}); } catch(e) {}			}		}				function closeFunct(onClose) { //onClose нужен для onOK и onCancel			if (!initializated) return cashShift(); //onClose не нужно выполнять для cash.options.onClose, т.к. его просто не существует. onClose вызывается только для нажатия onOK и onCancel			if (!opened) return; else opened = false; //Если окно не открыто, значит кнопки не могли быть нажаты			div1.style.display = "none"; div2.style.display = "none"; div3.innerHTML = "";			clearTimeout(intId);			if (onClose) setTimeout(onClose, 0);			cashShift(true);		}				function updateWindowAlign(onlyIfTooScrolled) {			try { if (opened) windowAlign(div2, {noScroll: true, onlyIfTooScrolled: onlyIfTooScrolled}); } catch(e) {}		}				function onKeyPress(event) {			event = event || window.event;			if (event.keyCode == 27) closeFunct();		}				//Обращения к функциям jsf:		//1) windowAlign - необязательно (отсутствие не приводит к ошибке). ВНИМАНИЕ! Если эта функция существует, обращается к jquery и многим глобальным переменным, если они присутствуют. Если не присутствуют, функция не выполняется, ошибок НЕ происходит.				//Описание "options":		//autohide		- скрыть окно через 2000-2200 мс		//leftAlign		- выравнивание по левому краю		//noButton		- убрать кнопку "ОК"		//cancelButton	- добавить кнопку отмены		//onOK			- событие нажатия кнопки "ОК"		//onCancel		- событие нажатия кнопки "Отмена"				//Формы записи:		//alert(s, autohide)	- показать алерт		//alert(s, options)		- показать алерт		//alert.close(onClose)	- закрыть алерт и выполнить функцию onClose, если алерт уже был на экране, НЕЛЬЗЯ ИСПОЛЬЗОВАТЬ ВРУЧНУЮ!		//alert.close()			- закрыть алерт		//alert.onOK			- обработчик на кнопку OK в текущем окне		//alert.onCancel		- обработчик на кнопку Отмена в текущем окне	}				//Показать окно (нужны modalWindowFon и modalWindow)	function modalShow() {		var cash = [];					//Кэш для окон		var div1, div2, div3, div4;		//Элементы		var windowById = {};			//Ссылки на элементы кэша по id		var initializated = false;		//Произведена ли инициализация		var opened = false;				//Открыто ли окно сейчас				returnFunct.close = closeFunct;		returnFunct.isOpened = isOpened;		returnFunct.update = returnFunct;		returnFunct.windowAlign = updateWindowAlign;		onDOMLoaded();		return returnFunct;				function cashPush(a) {			if (a.options.id) windowById[a.options.id] = a;			cash.push(a);		}				function cashShift(withNewWindow) {			if (cash.length <= 0) return null;			var a = cash.shift();			if (a.options.id) delete windowById[a.options.id];			if (withNewWindow) returnFunct(a.s, a.options);			return;		}				function onDOMLoaded() {			if (!document.body) return setTimeout(onDOMLoaded, 50);						//Привязка элементов			div1 = document.getElementById("modalWindowFon");	//Фон			div2 = document.getElementById("modalWindow");		//Белое окно			if (!div1 || !div2) {				if ("execCounter" in onDOMLoaded == false) onDOMLoaded.execCounter = 0;				if (onDOMLoaded.execCounter < 5) {					onDOMLoaded.execCounter++;					setTimeout(onDOMLoaded, 1000);				}				return;			}						//Создание элементов			div3 = document.createElement("div");				//Надпись			div4 = document.createElement("img");				//Крестик			div2.appendChild(div3);			div2.appendChild(div4);						//Стили			div1.style.cssText = "display: none; position: fixed; left: 0; top: 0; width: 100%; height: 100%; background: #000; opacity: 0.5; filter: alpha(opacity=50);";			div2.style.cssText = "display: none; position: fixed; top: 250px; min-width: 200px; max-width: 80%; height: auto; min-height: 18px; background-color: #ffffff; line-height: 0; font-size: 12px; font-family: Arial, Helvetica, sans-serif; text-align: center; cursor: default;"; //min-height: 18px 26px			div4.style.cssText = "display: none; position: absolute; border: 0; top: 20px; right: 20px; cursor: pointer;";			div4.alt = "Закрыть"; div4.onclick = function() { closeFunct(); };						//Показ алерта, если его уже кто-то успел вызвать			initializated = true;			cashShift(true);		}				function returnFunct(s, options) {			if (typeof(options) != "object") options = {id: options};			//Обновление в кэше			if (options.id && options.id in windowById) { windowById[options.id].s = s; windowById[options.id].options = options; return; }			//Элементы не созданы   ИЛИ   это не обновление, но окно уже есть на экране			if (!initializated    ||    (!options.id || options.id != returnFunct.id) && opened) return cashPush({s: s, options: options});			//Сохраняем параметры текущего показа			if (options.onClose) returnFunct.onClose = options.onClose; else delete returnFunct.onClose;			if (options.id) returnFunct.id = options.id; else delete returnFunct.id;			opened = true;						//Крестик			var cSize, cRadius;			switch (options.closeStyle) {				case "hide": break;				case 2:  cSize = 28; cRadius = 14; div4.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAWlBMVEUAAACbkpybkpybkpybkpybkpybkpybkpybkpybkpz7+/ybkpz6+vvb2Nunnqjw8PLJxMr29vfi3+LHwci3srm0rrW9t76on6jT0NSooaq+ucDn5uj29Pbs6+5FwMuhAAAACnRSTlMAa2rjH8h8OL3y/Fn8dQAAAP1JREFUKM99k+l2gyAQhU3qgn4sgnFp0r7/a1Ym7WCac7x/BC9n+GahUnWt6eHDtF31X9cGVXN9sWoDfkwhxu80rmDqQ8Qe7+zwK+s8dOrBLQ4HxUXdGiY7vGqCZ2TDMrxpwQgnPr6b0XPZzQYn28eYv3GaN9k6mkzj5cIETEO8AeJavzO1jHJyJrvZY5YfI+2Ok2R9R/U8nXakniDrsCLSnAN9BbJWV+thoZhxBoRKTQ1rhUVdCatADpX7A9JUNkliFVpNpWOVInx9Zhahesg1K10pX9xyS8N9TqV81eWk8KctO2/2+ZicD1gZTWtDGc2iy3GohVNVnkN/fA4/zokc3Op+vg8AAAAASUVORK5CYII="; break;				default: cSize = 15; cRadius = 0;  div4.src = "data:image/gif;base64,R0lGODlhEAAQAMQfAO57dP/x8dcpEPZ9Zf9tMf+YculSQNJBOP1cJcEYCflTId97ePN5Ytd3d+ZKOdh6euZ5dfRMG/+dd994dtR1dPeBZ7ANCO9DF/+ujd8qGuh5c94sEdU6K7weGtYnGf///yH5BAEAAB8ALAAAAAAQABAAAAWE4KdlwGeeJpBpH2BgTom2rwF4BSHFqCsRBY9mQwDyaDnChgURIBCFmKvwFEBOzWfUQEVYZ1lo9zv7hKvX8mfCeT45C/XkUFHYFZVDHDWvKxIJdnl7a3R2CQ0NgXh6HwsHA4cNJop2AwcTHQwREYgoipwMHQ8JF54ziqaTDRYPah+sFB8hADs="; break;			}			if (options.closeStyle == "hide") {				div4.style.display = "none";			}else{				div4.style.display = "inline";				div4.style.width = cSize + "px"; 				div4.style.height = cSize + "px"; 				div4.style.borderRadius = cRadius + "px";			}						//Сброс стиля для div2 (белое окно)			if ("noStyle" in options && options.noStyle) {				div2.style.borderRadius = "";				div2.style.MozBorderRadius = "";				div2.style.webkitBorderRadius = "";				div2.style.border = "";				div2.style.padding = "";				div2.style.boxShadow = "";			}else{				div2.style.borderRadius = "20px";				div2.style.MozBorderRadius = "20px";				div2.style.webkitBorderRadius = "20px";				div2.style.border = "2px solid #000000";				div2.style.padding = "20px";				div2.style.boxShadow = "0px 0px 10px #000";			}			div2.style.maxWidth = options.maxWidth ? options.maxWidth : "80%";			div2.style.width = "auto";			div2.style.left = "0";			div2.style.marginLeft = "0px";			div3.style.lineHeight = ("lineHeight" in options ? options.lineHeight + "px" : "0");						//Обновление текста и фона			if (typeof(s) == "object") {				div3.innerHTML = "";				div3.appendChild(s);			}else{				div3.innerHTML = s;			}			if (options.onShow) setTimeout(options.onShow, 0);			div2.style.opacity = "0"; div1.style.display = "block"; div2.style.display = "block";			updateSizes();						function updateSizes() {				var width = ("width" in options ? options.width : div2.clientWidth);				if (width == 0) return setTimeout(updateSizes, 50); else div2.style.opacity = "1";								var padding = ("noStyle" in options && options.noStyle ? 0 : 40);				div2.style.width = (width - padding) + "px";				div2.style.left = "50%";				div2.style.marginLeft = Math.floor(-width/2) + "px";				div4.style.top = ("closeTop" in options ? options.closeTop : (div2.clientHeight >= 66 ? 20 : Math.floor(div2.clientHeight / 2) - 13)) + "px"; //56-66, 8-13				div4.style.right = ("closeRight" in options ? options.closeRight : (div2.clientHeight >= 66 ? 20 : Math.floor(div2.clientHeight / 2) - 13)) + "px"; //56-66, 8-13				try { windowAlign(div2, {noScroll: true}); } catch(e) {}			}		}				function closeFunct(id) {			if (id) {				if (id in windowById) { var tm = cash.indexOf(windowById[id]); if (tm != -1) cash.splice(tm, 1); delete windowById[id]; return; }				if (returnFunct.id == id) closeCurrentWindow();			}else{				if (!initializated) {					cashShift();				}else{					closeCurrentWindow();				}			}			function closeCurrentWindow() {				if (!opened) return; else opened = false;				div1.style.display = "none"; div2.style.display = "none"; div3.innerHTML = ""; delete returnFunct.id;				if ("onClose" in returnFunct) setTimeout(returnFunct.onClose, 0);				cashShift(true);			}		}				function isOpened(id) {			if (id) {				if (id in windowById) return true;				if (returnFunct.id == id) return true;				return false;			}else{				if (!initializated) {					return (cash.length > 0);				}else{					return opened;				}			}		}				function updateWindowAlign(onlyIfTooScrolled) {			try { if (opened) windowAlign(div2, {noScroll: true, onlyIfTooScrolled: onlyIfTooScrolled}); } catch(e) {}		}				//Обращения к функциям jsf:		//1) windowAlign - необязательно (отсутствие не приводит к ошибке). ВНИМАНИЕ! Если эта функция существует, обращается к jquery и многим глобальным переменным, если они присутствуют. Если не присутствуют, функция не выполняется, ошибок НЕ происходит.				//Описание "options":		//id			- id окна для корректного update и close	(по умолчанию нет)		//width			- ширина окна								(по умолчанию auto)		//closeTop		- отступ сверху для крестика				(по умолчанию 20)		//closeRight	- отступ справа для крестика				(по умолчанию 20)		//closeStyle	- стиль крестика ["hide", 1-кр, 2-сер]		(по умолчанию 1 - красный крестик)		//noStyle		- отключить стандартный стиль				(по умолчанию false)		//lineHeight	- высота строки								(по умолчанию 0)		//onClose		- событие при закрытии окна					(по умолчанию нет)				//Формы записи:		//modalShow(s, id)				- показать окно		//modalShow(s, options)			- показать окно		//modalShow.close(id)			- закрывает окно с указанным id		//modalShow.close()				- закрывает текущее окно		//modalShow.isOpened(id)		- открыто ли окно id (либо есть в кэше)		//modalShow.isOpened()			- открыто ли какое-нибудь окно		//modalShow.id					- id текущего окна		//modalShow.onClose				- обработчик на закрытие текущего окна		//modalShow.onShow				- функция, выполняемая после отрисовки окна	}				//Показать окно (нужны metroWindowFon и metroWindowCont)	function metroShow() {		var cash = [];					//Кэш для окон {node, options}		var cash2 = [];					//Кэш для недобавленных окон		var div1, div2, div3, div4;		//Элементы		var windowById = {};			//Ссылки на элементы кэша по id {node, options}		var windowById2 = {};			//Ссылки на элементы кэша по id для недобавленных окон		var initializated = false;		//Произведена ли инициализация		var currentWindowId = "";		//id активного окна				onDOMLoaded();		returnFunct.close = closeFunct;		returnFunct.isOpened = isOpened;		returnFunct.windowAlign = updateWindowAlign;		return returnFunct;				function cash2Push(a) {			windowById2[a.options.id] = a;			cash2.push(a);		}				function cash2Shift() {			if (cash2.length <= 0) return null;			var a = cash2.shift();			delete windowById2[a.options.id];		}				function cash2ShiftAll() {			while (cash2.length > 0) {				var a = cash2.shift();				delete windowById2[a.options.id];				returnFunct(tm.s, tm.options);			}		}				function onDOMLoaded() {			if (!document.body) return setTimeout(onDOMLoaded, 50);						//Привязка элементов			div1 = document.getElementById("metroWindowFon");	//Фон			div2 = document.getElementById("metroWindowCont");	//Белое окно			if (!div1 || !div2) {				if ("execCounter" in onDOMLoaded == false) onDOMLoaded.execCounter = 0;				if (onDOMLoaded.execCounter < 5) {					onDOMLoaded.execCounter++;					setTimeout(onDOMLoaded, 1000);				}				return;			}						//Создание элементов			div3 = document.getElementById("metroWindowCont2");			//metroWindowCont2			if (!div3) { div3 = document.createElement("div"); div2.appendChild(div3); }			div4 = document.getElementById("metroWindowCloseButton");	//Крестик			if (!div4) { div4 = document.createElement("a"); div3.appendChild(div4); }						//Стили			div3.id = "metroWindowCont2";			div4.id = "metroWindowCloseButton"; div4.href = "#";			div4.onclick = function(event) {				try {					event = event || window.event; event.preventDefault(); event.stopPropagation();				} catch(e) {				}				closeFunct();			};						//Показ алерта, если его уже кто-то успел вызвать			initializated = true;			cash2ShiftAll();		}				function returnFunct(s, options) {			if (typeof(options) != "object") options = {id: options};			if (!options.id) options.id = "default";			//Обновление в кэше			if (options.id in windowById) return updateWindow(windowById[options.id].node, s, options);			//Элементы не созданы			if (!initializated) return cash2Push({s: s, options: options});			//Сохраняем параметры текущего показа			var lastWindowId = currentWindowId;						//Спрячем старое окно			if (options.popup && lastWindowId != "") windowById[lastWindowId].node.style.display = "none";			//Создаём вершину			var node = document.createElement("div");			node.className = "metroWindow";			var cashElem = {node: node, options: options};			//node.metroId = options.id;			//if (options.onClose) node.metroOnClose = options.onClose;			windowById[options.id] = cashElem;			if (options.popup || lastWindowId == "") {				cash.unshift(cashElem);				node.style.display = "block";				currentWindowId = options.id;			}else{				cash.push(cashElem);				node.style.display = "none";			}			//Показываем контейнеры			if (cash.length == 1) {				div1.style.display = "block";				div2.style.display = "block";			}			//Обновляем текст			div3.insertBefore(node, div4)			updateWindow(node, s, options);						function updateWindow(node, s, options) {				if (typeof(s) == "object") {					node.innerHTML = "";					node.appendChild(s);				}else{					node.innerHTML = s;				}				node.style.width = (options.width ? options.width + "px" : "");				if (options.id == currentWindowId) {					div3.style.marginTop = "0px";					windowAlign(div3, {noScroll: true});				}			}		}				function closeFunct(id) {			var metroOnClose;						if (!initializated) {				if (cash2.length == 0) return;				if (!id) id = cash2[0].options.id;				if (id in windowById2) {					var tm = cash2.indexOf(windowById2[id]);					if (tm != -1) {						metroOnClose = cash2[tm].options.onClose;						cash2.splice(tm, 1);					}					delete windowById2[id];				}			}else{				if (currentWindowId == "") return;				if (!id) id = currentWindowId;				if (id in windowById) {					var tm = cash.indexOf(windowById[id]);					if (tm != -1) {						metroOnClose = cash[tm].options.onClose;						cash.splice(tm, 1);						div3.removeChild(windowById[id].node);						if (cash.length == 0) {							div1.style.display = "none";							div2.style.display = "none";							currentWindowId = "";						}else						if (tm == 0) {							cash[0].node.style.display = "block";							currentWindowId = cash[0].options.id;							div3.style.marginTop = "0px";							windowAlign(div3, {noScroll: true});						}					}					delete windowById[id];				}			}						if (typeof(metroOnClose) == "function") metroOnClose();		}				function isOpened(id) {			if (!id) {				if (!initializated) {					return (cash2.length > 0);				}else{					return (currentWindowId != "");				}			}else{				if (!initializated) {					for (var i = cash2.length - 1; i >= 0; i--) {						if (cash2[i].options.id == id) return true;					}					return false;				}else{					return (id in windowById);				}			}		}				function updateWindowAlign(onlyIfTooScrolled) {			try { if (currentWindowId != "") windowAlign(div3, {noScroll: true, onlyIfTooScrolled: onlyIfTooScrolled}); } catch(e) {}		}				//Обращения к функциям jsf:		//1) windowAlign - необязательно (отсутствие не приводит к ошибке). ВНИМАНИЕ! Если эта функция существует, обращается к jquery и многим глобальным переменным, если они присутствуют. Если не присутствуют, функция не выполняется, ошибок НЕ происходит.				//Описание "options":		//id			- id окна для корректного update и close	(по умолчанию нет)		//width			- ширина окна								(по умолчанию auto)		//popup			- перекрыть уже открытое окно				(по умолчанию false)		//onClose		- событие при закрытии окна					(по умолчанию нет)				//Формы записи:		//metroShow(s, id)				- показать окно (если id не указан, то id="default")		//metroShow(s, options)			- показать окно (если id не указан, то id="default")		//metroShow.close(id)			- закрывает окно с указанным id		//metroShow.close()				- закрывает текущее окно		//metroShow.isOpened(id)		- открыто ли окно id		//metroShow.isOpened()			- открыто ли хоть какое-нибудь окно	}				//Выполняет выравнивание окна по вертикали JQUERY ACCESS_TO_GLOBAL_VARS	function windowAlign(elem, options) {		try {			if (typeof(options) != "object") options = {};			if ("VK" in window == false || "appState" in window == false || "scrollY" in appState == false || "windowHeight" in appState == false || "appOffset" in appState == false || "curHeight" in appState == false) { //Проверка на то, что необходимые данные имеются в нашем распоряжении				var clientHeight = document.documentElement.clientHeight;				if ("screen" in window && "height" in screen && screen.height - 30 < clientHeight) clientHeight = screen.height - 30;				var boxHeight = $(elem).outerHeight(); //Высота нашего элемента				var top = (clientHeight - boxHeight) / 2;				top -= top * 0.1;				if (top < 0 || top + boxHeight > clientHeight) {					if (top + boxHeight > clientHeight) top = clientHeight - boxHeight - 20;					if (top < 20) top = 20;				}			}else{				var bannerTopHeight = (("options" in window && "bannerTop" in window.options) ? $(window.options.bannerTop + ":visible").height() : 0); //Вычисляем, куда прокручивать (высота рекламного блока сверху), ОБРАЩЕНИЕ К WINDOW.OPTIONS				if (("noScroll" in options == false || options.noScroll != true) && appState.scrollY >= appState.appOffset + bannerTopHeight) { VK.callMethod("scrollWindow", appState.appOffset + bannerTopHeight - 1); appState.scrollY = appState.appOffset + bannerTopHeight - 1; } //Выполняем прокрутку страницы				var boxHeight = $(elem).outerHeight(); //Высота нашего элемента								if (options.onlyIfTooScrolled) {					if (boxHeight + 40 >= appState.windowHeight) { //if (boxHeight >= appState.curHeight - myUpCut - myDownCut)						var curTop = ($(elem).css("position") == "relative" ? $(elem).css("margin-top") : curTop = $(elem).css("top"));						curTop = +curTop.substr(0, curTop.length - 2);						var myUpCut = Math.max(appState.scrollY - appState.appOffset, 0);						var myDownCut = Math.max(appState.curHeight - appState.scrollY + appState.appOffset - appState.windowHeight, 0);												if      (curTop + boxHeight < myUpCut + 40) top = myUpCut + 40 - boxHeight; //Окно слишком вверху						else if (curTop > appState.curHeight - myDownCut - 40) top = appState.curHeight - myDownCut - 40; //Окно слишком внизу						else if (true) return;						var cannotCheck1 = true;						//if (curTop + boxHeight >= myUpCut + 15 && curTop <= appState.curHeight - myDownCut - 15) return;					}					//console.log("boxHeight = " + boxHeight + "\nappState.appOffset = " + appState.appOffset + "\nappState.scrollY = " + appState.scrollY + "\nmyDownCut = " + myDownCut + "\n\ncurTop + boxHeight = " + (curTop + boxHeight) + "\nmyUpCut = " + myUpCut + "\ncurTop = " + curTop + "\nappState.curHeight - myDownCut = " + (appState.curHeight - myDownCut));					//if (Math.abs(top - curTop) < boxHeight) return;				}								if (typeof(top) == "undefined") {					var downCut = Math.max(appState.windowHeight - appState.appOffset + appState.scrollY - appState.curHeight, 0); //Насколько наше приложение обрезано снизу, столько и вычтем потом с высоты экрана					var upCut = Math.max(appState.appOffset - appState.scrollY, 0); //Насколько наше приложение обрезано сверху, столько и прибавим потом с высоты экрана					var top = (appState.windowHeight - downCut + upCut - boxHeight) / 2 - appState.appOffset + appState.scrollY; //Вычисляем требуемое положение элемента					top -= (top - appState.scrollY + appState.appOffset - upCut) * 0.1; //Поднимаем окошко немного наверх, чтобы скорректировать обман зрения				}								var if1 = appState.scrollY - appState.appOffset;			//Для проверки, что окно не слишком высоко				var if2 = appState.curHeight - boxHeight;					//Для проверки, что окно не слишком низко				//if (top < if1 || top > if2 || top < (cannotCheck1?20:0)) {//Если обе части находятся в рамках приложения, ничего делать не нужно				if (top < if1 + 20 || top > if2 - 20 || top < 20) {			//Если обе части находятся в рамках приложения, ничего делать не нужно					if (!cannotCheck1 && top < if1 + 20) top = if1 + 20;	//Сдвигаем пониже, чтобы верхняя граница была виден на экране (желательно)					if (top > if2 - 20) top = if2 - 20;						//Если нижняя граница не поместилась, свдигаем наверх (самое главное условие)					if (top < 20) top = 20;									//Если верхняя граница не поместилась, сдвигаем вниз (самое главное условие)				}			}						top = Math.round(top);			if ($(elem).css("position") == "relative") $(elem).css("margin-top", top); else $(elem).css("top", top);			if ("topAlignElems" in options) {				for (var i = options.topAlignElems.length - 1; i >= 0; i--) {					if ($(options.topAlignElems[i]).css("position") == "relative") $(options.topAlignElems[i]).css("margin-top", top); else $(options.topAlignElems[i]).css("top", top);				}			}			return;		} catch(e) {			return;		}				//Обращения к глобальным переменным:		//1) VK (без window)		//2) options.bannerTop		//3) appState.scrollY (без window)		//4) appState.windowHeight (без window)		//5) appState.appOffset (без window)		//6) appState.curHeight (без window)		//При отсутствии любой из указанных глобальных переменных выравнивание будет выполнено по высоте окна без учёта того, что приложение размещено именно на сайте вконтакте				//Описание "options":		//noScroll			- не прокручивать страницу наверх		//topAlignElems		- список элементов, у которых тоже нужно изменять top		//boxHeight			- высота позиционируемого элемента	}				//Обновляет положение окон по вертикали, НА ДАННЫЙ МОМЕНТ, ЕСЛИ ФУНКЦИЯ ЗАПУСКАЕТСЯ НЕ В ПРИЛОЖЕНИИ ВКОНТАКТЕ, ТО ОНА ПРОКРУЧИВАЕТ ДАЖЕ ОКНА, НЕ ВЛЕЗАЮЩИЕ В ЭКРАН	function updateAlign(onlyIfTooScrolled) {		//Рекомендации по использованию onlyIfTooScrolled: первые 1.2 секунды установить в false, дальше в true		//onlyIfTooScrolled будет применён только для окон, не влезающих в экран		try { jsf.alert.windowAlign(onlyIfTooScrolled); } catch(e) {}		try { jsf.modalShow.windowAlign(onlyIfTooScrolled); } catch(e) {}		try { jsf.metroShow.windowAlign(onlyIfTooScrolled); } catch(e) {}	}				//Рандом от min до max	function random(min, max) {		return Math.floor(Math.random() * (max - min + 1)) + min;	}				//Является ли Number в человеческой форме	function jsfIsNumber(num) {		return parseFloat(num, 10).toString() == num && num != "NaN" && num != "Infinity";	}				//Является ли Int в человеческой форме	function jsfIsInt(num) {		return parseInt(num, 10).toString() == num && num != "NaN";	}				//Количество элементов в объекте	function arrayLength(obj) {		var len = 0;		for (var i in obj) len++;		return len;	}				//Пуст ли объект	function arrayIsEmpty(obj) {		for (var i in obj) return false;		return true;	}				//Логирование объекта	function logObject(obj) {		for (var tm in obj) {			try {				switch (typeof(obj[tm])) {					case 'function': console.log(tm + " = function()"); break;					case 'object': console.log(tm + " = [object]"); break;					default: console.log(tm + " = " + obj[tm]);				}			} catch(e) {				console.log(tm + " = ???");			}		}	}				//Инциализация приложения	function vkInit(options, callback) {		if (typeof(options) != "object") {			if (!callback) callback = options;			options = {};		}		if ("apiVersion" in options == false) options.apiVersion = "5.7";		if ("app_id" in options == false) options.app_id = (typeof(window.options) == "object" && "app_id" in window.options) ? window.options.app_id : 638461;		if ("index" in options == false) options.index = "index.html";		if ("changeLocTimer" in options == false) options.changeLocTimer = 0;				try {			try {				if (document.all && !document.querySelector && !document.addEventListener && !window.Storage && !window.Event) jsf.alert("Вы используете браузер Internet Explorer 7 или ниже. Это <font color=red><b>безнадёжно устаревший</b></font> браузер, работа приложения в нём не поддерживается. Вам нужно обновить его либо установить другой браузер. Инструкцию можно <a href='//vk.com/page-10042064_46371170' target='blank'>найти здесь</a>.");				else if (!window.JSON) jsf.alert("Вы используете <font color=red><b>очень устаревший</b></font> браузер, работа приложения в нём не поддерживается. Вам нужно обновить его либо установить другой браузер. Инструкцию можно <a href='//vk.com/page-10042064_46371170' target='blank'>найти здесь</a>.");			} catch (e) {}			try { if (document.all && document.querySelector && !document.addEventListener) jsf.alert("Вы используете браузер Internet Explorer 8. Это <font color=red><b>устаревший</b></font> браузер, и приложение может работать в нём некорректно. Инструкцию установки нового браузера можно <a href='//vk.com/page-10042064_46371170' target='blank'>найти здесь</a>."); } catch (e) {}			VK.init(function() {				callback();				if (window.name.indexOf('fXD') == -1 && (window.parent.frames.length == 0 || location.search.indexOf("viewer_id") == -1 && location.search.indexOf("api_id") == -1)) {					msg1();					location.href = "http://vk.com/app" + options.app_id;				}			}, function() {				if (window.parent.frames.length > 0) {					jsf.alert("Произошла ошибка при инициализации приложения.<br>Страница будет автоматически обновлена через 1 секунду.", {noButton: true});				}else{					msg1();				}				location.href = "http://vk.com/app" + options.app_id;			}, options.apiVersion);			if (!options.noChangeLoc) setTimeout(function() { try{window.history.replaceState({},'',options.index);}catch(e){} }, options.changeLocTimer); //Адресная строка		} catch(e) {			if (window.parent.frames.length > 0) {				jsf.alert("У Вас включен Adblock. Пожалуйта, выключите его перед тем, как продолжать работу"				+ "<br><br>Если это не помогло, попробуйте просто запустить приложение в другом браузере"				+ "<br><br>Другой способ - выключите Adblock только на этом сайте или на этой странице"				+ (jsf.browser.firefox ? "<br>(Alt -> Инструменты -> Adblock Plus -> Отключить только на этой странице)" : "")				+ (jsf.browser.chrome || jsf.browser.opera ? "<br>(нажать красную кнопку наверху и снять галочку «Включено на этом сайте»)" : "")				+ (jsf.browser.firefox ? "<br><br>Другой способ - снимите галочку «Удалять кнопки социальных сетей»<br>на этой странице: <u>chrome://adblockplus/content/ui/firstRun.html</u>" : "")				+ (jsf.browser.chrome ? "<br><br>Другой способ - снимите галочку «Удалять кнопки социальных сетей» на этой<br>странице: <u>chrome-extension://cfhdojbkjhnklbpkdaibdccddilifddb/firstRun.html</u>" : "")				+ (jsf.browser.opera ? "<br><br>Другой способ - снимите галочку «Удалять кнопки социальных сетей» на этой<br>странице: <u>chrome-extension://oidhhegpmlfpoeialbgcdocjalghfpkp/firstRun.html</u>" : "")				, {noButton: true});			}else{				try {					location.href = "http://vk.com/app" + options.app_id;					msg1();				} catch(e) {					jsf.alert("Чтобы попасть в приложение, перейдите сюда: http://vk.com/app" + options.app_id, {noButton: true});				}			}		}				function msg1() {			jsf.alert("Вы открыли это приложение за пределами сайта вконтакте.<br>Вы будете автоматически перенаправлены на нужный сайт через 1 секунду.", {noButton: true});		}				//Обращения к глобальным переменным:		//1) VK (без window)		//2) options.app_id (необязательно)		//3) location				//Обращения к функциям jsf:		//1) jsf.alert, причём именно с префиксом jsf		//2) jsf.browser				//Описание "options":		//apiVersion		- версия API		//app_id			- id приложения, если отсутствует, то window.options.app_id или 638461		//index				- название главной страницы (index.html)		//changeLocTimer	- через сколько миллисекунд менять содержимое адресной строки		//noChangeLoc		- запрет изменения адресной строки	}				//base64	function base64_encode(m){for(var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),c,d,h,e,a,g="",b=0,f,l=0;l<m.length;++l){c=m.charCodeAt(l);if(128>c)d=1;else for(d=2;c>=2<<5*d;)++d;for(h=0;h<d;++h)1==d?e=c:(e=h?128:192,a=d-2-6*h,0<=a&&(e+=(6<=a?1:0)+(5<=a?2:0)+(4<=a?4:0)+(3<=a?8:0)+(2<=a?16:0)+(1<=a?32:0),a-=5),0>a&&(u=6*(d-1-h),e+=c>>u,c-=c>>u<<u)),f=b?f<<6-b:0,b+=2,f+=e>>b,g+=k[f],f=e%(1<<b),6==b&&(b=0,g+=k[f])}b&&(g+=k[f<<6-b]);return g}	function base64_decode(c){0<=c.indexOf("=")&&(c=c.substr(0,c.indexOf("=")));for(var k=0,d=0,b,l,e,g,f=0,a,h,m="";k<c.length;++k){l="="==c.charAt(k)?0:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(k));d=(d+6)%8;if(6!=d){b+=l>>d;if(0==f)g=!0,h=0,e=1,128>b&&(e=0,h=b&64,g=!1);else if(128!=(b&192))return!1;for(a=32;g&&0<a;a>>=1)b&a?++e:g=!1;g||(a=6+6*f-e,6<a&&(a=6),a&&(h+=b%(1<<a)<<6*(e-f)));f==e?(m+=String.fromCharCode(h),f=0):++f}b=d?l%(1<<d)<<8-d:0}return m}				//Удаляет элемент из массив, на его место ставит последний элемент массива	function remArrElem(a, i) {		if (i < 0 || i >= a.length) return;		if (i == a.length - 1) {			delete a[i];		}else{			a[i] = a[a.length - 1];			delete a[a.length - 1];		}		a.length = a.length - 1;	}				//Вызывает console.log два раза	function clog(a, b) {		console.log(a);		console.log(b);	}				//Заменить всё	function replaceAll(s, s1, s2) {		if (typeof(s1) == "string" || typeof(s1) == "number") return s.split(s1).join(s2);		if (typeof(s1) == "object" && "length" in s1) {			for (var i = s1.length - 1; i >= 0; i--) s = s.split(s1[0]).join(s2);		}		return s;	}				//indexOf для двумерного массива (оптимайщ=знее, если a - маленький массив, b - большой)	function matrixIndexOf(a, b) {		for (var i = a.length - 1; i >= 0; i--) {			if (b.indexOf(a[i]) != -1) return true;		}		return false;	}};